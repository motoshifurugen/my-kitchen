# 04: モーショントークン
_Motion Tokens Specification_

---

## 概要

アニメーションのデュレーション、イージング、遷移パターンを定義する。
具体的な値は `04-motion-tokens.json` に格納。

**関連イシュー:** UX-027, UX-028, UX-029, UX-032

---

## 設計方針（World Bible準拠）

- 速すぎない、遅すぎない
- 「使っていることを忘れる速さ」が理想
- 急がない、しかし停滞もしない
- 止まり方がやわらかいことが重要

### 禁止パターン

- `linear` イージング（機械的）
- 強い `spring` / `bounce`（弾みすぎる）
- `overshoot`（勢いが出すぎる）
- 400ms超のデュレーション（待たされ感）
- 120ms未満のデュレーション（機械的）

---

## デュレーション

### 基本スケール

| トークン名 | 値 | 用途 |
|-----------|-----|------|
| `duration.instant` | 100ms | 即時フィードバック |
| `duration.fast` | 150ms | 軽いインタラクション |
| `duration.normal` | 200ms | 標準遷移 |
| `duration.slow` | 280ms | 情報量多い遷移 |
| `duration.slower` | 350ms | 演出的な動き |

### 用途別デュレーション

| トークン名 | 値 | 用途 |
|-----------|-----|------|
| `duration.transition.fade` | 200ms | フェード遷移 |
| `duration.transition.slide` | 250ms | スライド遷移 |
| `duration.transition.overlay` | 200ms | オーバーレイ出現 |
| `duration.feedback.tap` | 100ms | タップフィードバック |
| `duration.celebration` | 350ms | 記録完了セレブレーション |
| `duration.worldBreath` | 3000ms | 世界レイヤー呼吸1サイクル |

---

## イージング

### 基本イージング

| トークン名 | cubic-bezier | 用途 |
|-----------|--------------|------|
| `easing.easeOut` | cubic-bezier(0.33, 1, 0.68, 1) | 標準（終わりがやわらかい） |
| `easing.easeInOut` | cubic-bezier(0.65, 0, 0.35, 1) | 対称的な動き |
| `easing.easeOutSoft` | cubic-bezier(0.25, 1, 0.5, 1) | よりやわらかい終わり |

### 用途別イージング

| トークン名 | 適用イージング | 用途 |
|-----------|---------------|------|
| `easing.transition` | easeOut | 画面遷移 |
| `easing.feedback` | easeOut | インタラクション |
| `easing.celebration` | easeOutSoft | セレブレーション |
| `easing.worldBreath` | easeInOut | 世界の呼吸 |

---

## 遷移パターン

### 1. Fade（フェード）

最も基本的な遷移。視線の移動に近い。

```
用途: フッター間移動、静かな画面切替
duration: 200ms
easing: easeOut
opacity: 0 → 1
```

### 2. Soft Slide（軽いスライド）

階層移動や方向性のある遷移。

```
用途: 一覧 → 詳細、連続ページ
duration: 250ms
easing: easeOut
translateX: ±30pt（短い距離）
opacity: 同時に 0 → 1
```

### 3. Overlay（オーバーレイ）

モーダル、ボトムシートの出現。

```
用途: 記録フロー、設定詳細
duration: 200ms
easing: easeOut
translateY: 20pt → 0（軽い上方向）
opacity: 0 → 1
背景: overlay色をフェードイン
```

---

## 3層モーション構造

### 世界レイヤー（常時）

| 要素 | アニメーション | 周期 | 振幅 |
|------|--------------|------|------|
| 湯気 | ゆらぎ | 3000ms | 微小 |
| 光の移ろい | グラデーション変化 | 10000ms | 微小 |
| カーテン/植物 | ゆれ | 4000ms | 微小 |
| キャラクター呼吸 | スケール | 3000ms | 0.98-1.02 |

**重要**: 
- 派手な動きは禁止
- 注目を奪わない
- 遷移時も可能な限り継続

### UIレイヤー（イベント駆動）

| イベント | アニメーション | duration | easing |
|---------|--------------|----------|--------|
| タップ | スケール 0.97 → 1 | 100ms | easeOut |
| フォーカス | ボーダー色変化 | 150ms | easeOut |
| 画面遷移 | Fade/Slide | 200-250ms | easeOut |

**重要**:
- 静止状態が基本
- 動きすぎない
- 常時アニメーション禁止

### 演出レイヤー（特定イベント）

記録完了時のみ、少し強い演出を許可。

---

## 記録完了セレブレーション

### シーケンス

```
1. 保存ボタンタップ
   ↓ 100ms
2. 画面中央に小さな光の広がり
   ↓ 350ms (easeOutSoft)
3. 「記録しました」メッセージ表示
   ↓ 300ms 静止（間）
4. 棚追加アニメーションへ遷移
   ↓ 250ms
5. トップ画面へ戻る
```

### 制約

- 派手すぎない
- 評価感を出さない
- 「静かに広がる光や余韻」

---

## Reduced Motion対応

`prefers-reduced-motion: reduce` 時の挙動：

| 通常 | Reduced Motion時 |
|------|-----------------|
| Slide遷移 | Fadeのみ |
| セレブレーション | 光の広がりなし、メッセージのみ |
| 世界の呼吸 | 周期を2倍に延長、または静止 |
| タップフィードバック | 維持（短いため） |

---

## 更新履歴

| 日付 | 更新内容 |
|------|---------|
| 2026-02-01 | 初版作成 |
