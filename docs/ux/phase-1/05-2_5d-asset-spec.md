# 05: 2.5Dアセット仕様
_2.5D World Asset Specification_

---

## 概要

トップ画面キッチン世界の2.5Dアセット仕様を定義する。
レイヤー合成によるシグナル対応、固定カメラ構図、アセットパイプラインを含む。

**関連イシュー:** UX-036, UX-037, UX-038, UX-041, UX-042, UX-044, UX-046

---

## 基本方針（World Bible準拠）

### Reality:Fantasy = 5:5

- 形状はデフォルメしてよい
- 質感はやわらかく、かわいくてよい
- しかし生活の痕跡は本物であること
- 「ここに住めそう」と感じられるか？が判断基準

### 固定カメラ原則

- **カメラ位置は固定**（変更不可）
- 時間帯が変わっても部屋の構図/レイアウトは変えない
- 季節が変わっても基本構成は維持
- トーン（色味・明度）のみが変化する

---

## レイヤースタック構造

下から順に重ねる：

```
Layer 7: UI Layer（フッター等）     ← 別管理
─────────────────────────────────
Layer 6: Ambient Loops（湯気等）   ← アニメーション
Layer 5: Season Overlay（季節トーン）
Layer 4: Time Overlay（時間帯トーン）
Layer 3: Household Props（世帯別小物）
Layer 2: Age Props（年代別小物）
Layer 1: Base Kitchen（ベースキッチン）
```

### 合成モード

| レイヤー | 合成モード | 備考 |
|---------|-----------|------|
| Ambient Loops | Normal | 透過PNG/動画 |
| Season Overlay | Soft Light / Overlay | 透明度調整可 |
| Time Overlay | Soft Light / Multiply | 時間帯で補間 |
| Household Props | Normal | 追加/削除 |
| Age Props | Normal | 差し替え |
| Base Kitchen | Normal | 常に表示 |

---

## ベースキッチン仕様

### 含まれる要素

| 要素 | 説明 | 備考 |
|------|------|------|
| 壁・床 | キッチンの基本構造 | 固定 |
| キッチン台 | 調理台・シンク | 固定 |
| 窓 | 光の入り口 | 時間帯で光量変化 |
| 冷蔵庫 | 基本家電 | 固定 |
| コンロ | 調理エリア | 固定 |
| 棚 | 収納・飾り棚 | 固定構造、中身は変化可 |

### スタイルガイド

- **形状**: 柔らかい角、デフォルメ許容
- **素材感**: マット基本、やわらかい影
- **色味**: ニュートラル〜やや暖色
- **ディテール**: 生活の痕跡を入れる（使用感、小傷等）

---

## 時間帯オーバーレイ（6区分）

| 区分 | 時刻 | 色温度 | 明度 | 彩度 |
|------|------|--------|------|------|
| 早朝 | 4:00-6:00 | ニュートラル〜やや寒色 | 低〜中 | 低 |
| 朝 | 6:00-10:00 | やや寒色〜ニュートラル | 高め | 低〜中 |
| 昼 | 10:00-16:00 | ニュートラル | 最高 | 自然 |
| 夕方 | 16:00-19:00 | やや暖色 | 中 | やや高 |
| 夜 | 19:00-23:00 | 暖色寄り | 低め | 低〜中 |
| 深夜 | 23:00-4:00 | 暖色〜アンバー | 最低 | 低 |

### 補間ルール

- 時間帯間は**グラデーション補間**
- 段階切替は禁止（パッと変わらない）
- 更新頻度: 15分間隔以上
- ユーザーが変化に気づかないレベルが理想

---

## 季節オーバーレイ（4季節）

| 季節 | 月 | 色味方向性 | 備考 |
|------|-----|-----------|------|
| 春 | 3-5月 | やや明るく、淡い | 桜色のほのかな反映 |
| 夏 | 6-8月 | クリア、やや涼しげ | 緑の反映 |
| 秋 | 9-11月 | 暖色寄り、やわらかい | 紅葉色の反映 |
| 冬 | 12-2月 | やや青み、落ち着き | 冷たさと温もりの共存 |

### 遷移ルール

- 季節間は**だんだん変わる**（急変禁止）
- 遷移期間: 約2週間でグラデーション
- 派手な季節演出は禁止（現実の自然現象として）

---

## シグナル合成ルール

### 優先順位

```
1. 時間（Time）      ← 最優先
2. 季節（Season）
3. 密度（Household）
4. 素材感（Age）
5. 成長（Behavior）  ← 将来拡張
```

### 組み合わせ数

- 時間帯: 6
- 季節: 4
- 年代: 3
- 世帯: 2

理論上: 6 × 4 × 3 × 2 = **144パターン**

### フル書き出し回避策

144パターンのフル書き出しは行わない。

```
実際のアセット数:
- Base Kitchen: 1セット
- Age Props: 3セット（差し替え）
- Household Props: 2セット（追加/削除）
- Time Overlay: 6枚（グラデーション用）
- Season Overlay: 4枚（グラデーション用）
- Ambient Loops: 5-10要素
```

合計: 約20-30アセットで144パターンをカバー

---

## アセットパイプライン

### フォーマット

| タイプ | フォーマット | 備考 |
|--------|-------------|------|
| 静止画 | WebP (優先) / PNG | 透過対応 |
| オーバーレイ | PNG (透過) | 合成用 |
| アニメーション | Lottie / WebM / スプライト | 要検討 |

### 解像度ターゲット

| デバイス | スケール | 備考 |
|---------|---------|------|
| @1x | 基準 | 低スペック用 |
| @2x | 2倍 | 標準 |
| @3x | 3倍 | 高解像度 |

### 命名規則

```
{layer}-{element}-{variant}@{scale}.{ext}

例:
base-kitchen-main@2x.webp
age-props-young@2x.webp
time-overlay-night@2x.png
season-overlay-spring@2x.png
ambient-steam-loop.webm
```

### フォルダ構造

```
assets/
├── base/
│   └── kitchen/
├── props/
│   ├── age/
│   └── household/
├── overlays/
│   ├── time/
│   └── season/
└── ambient/
```

---

## メモリ・パフォーマンス予算

| 項目 | 目安 |
|------|------|
| 総アセットサイズ | < 50MB |
| メモリ使用量（世界表示時） | < 100MB |
| 起動時ロード | Base + 現在のTime/Seasonのみ |
| 遅延ロード | Props, 他のOverlay |

### 低スペック端末対応

- @1xアセット使用
- アニメーションフレームレート低下
- 一部Ambient効果の省略

---

## 品質チェックリスト

- [ ] Reality:Fantasy = 5:5 を維持しているか
- [ ] 「住めそう」と感じられるか
- [ ] 生活の痕跡があるか
- [ ] 派手すぎないか
- [ ] 全レイヤー合成で自然に見えるか
- [ ] 時間帯変化で構図が変わっていないか

---

## 更新履歴

| 日付 | 更新内容 |
|------|---------|
| 2026-02-01 | 初版作成 |
